!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";t.__esModule=!0,new(i(1).default)},function(e,t,i){"use strict";t.__esModule=!0;var r=i(2),n=i(3),s=i(4),o=function(){function e(){var e=this;this.playerBoard=document.querySelector("#playerBoard"),this.enemyBoard=document.querySelector("#enemyBoard"),this.fleetGarage=document.querySelector("#shipGarage"),this.shipNameInput=document.querySelector("#shipNameInput"),this.foreCoordinatesInput=document.querySelector("#foreCoordinatesInput"),this.directionInput=document.querySelector("#directionInput"),this.setShipsBtn=document.querySelector("#setBtn"),this.scoreValue=document.querySelector(".scoreValue"),this.clearScoreBtn=document.querySelector(".clearBtn"),this.playerShipFleet=[],this.enemyShipFleet=[],this.playerBattleField=[],this.enemyBattleField=[],this.player="player",this.enemy="enemy",this.currentTurn="none",this.gameStatus="preparation",this.playerScore=0,this.enemyScore=0,this.score=this.playerScore+":"+this.enemyScore,this.scoreValue.innerHTML=this.score,this.playerBoardBin=this.createArrayWithO(),this.createBoard(this.playerBoard,this.playerBattleField,this.player),this.createBoard(this.enemyBoard,this.enemyBattleField,this.enemy),this.setShipsBtn.addEventListener("click",(function(){return e.setShipOnBoard(e.shipNameInput.value,e.foreCoordinatesInput.value,e.directionInput.value,e.playerBattleField,e.playerShipFleet)})),this.enemyBoard.addEventListener("click",(function(){return e.playerShoot(event,e.enemyBattleField,e.enemyShipFleet)})),this.clearScoreBtn.addEventListener("click",(function(){return e.clearScore()}))}return e.prototype.clearScore=function(){this.playerScore=0,this.enemyScore=0},e.prototype.setShipOnBoard=function(e,t,i,r,o){if(o.length<5&&"preparation"==this.gameStatus)if(o.find((function(t){return t.name===e})))console.log(e+" already exist");else if(Object.values(s.shipTypes).includes(e))if(Object.values(s.directionTypes).includes(i)){var a=e,l=a.slice(1,2),h=t,u=h.slice(0,1),p=h.slice(1,2),c=i;if(0===this.playerBoardBin[parseInt(u)][parseInt(p)]){var d=new n.default(u,p,a,c),f=r.find((function(e){return e.id===h}));f.partOfShip(a),d.shipFields.push(f),this.playerBoardBin[parseInt(u)][parseInt(p)]=1;for(var y=1;y<l;y++){if("D"==c){var m=parseInt(u)+y,S=r.find((function(e){return e.id===""+m+p}));this.playerBoardBin[m][parseInt(p)]=1}else if("R"==c){var B=parseInt(p)+y;S=r.find((function(e){return e.id===""+u+B}));this.playerBoardBin[parseInt(u)][B]=1}S.partOfShip(a),d.shipFields.push(S)}this.playerShipFleet.push(d),5==o.length&&(this.setEnemyShips(this.enemyShipFleet,this.enemyBattleField),this.gameStatus="war",this.currentTurn="player"),console.log(e+" - set on field")}else console.log("There is ship")}else console.log("Wrong direction");else console.log(e+" - wrong name")},e.prototype.setEnemyShips=function(e,t){var i=this.randomSetUpEnemyShips();t.forEach((function(r){var s=parseInt(r.id.substring(0,1)),o=parseInt(r.id.substring(1,2));if(1===i[s][o]){var a="",l=e.find((function(e){return"s1"===e.name})),h=t.find((function(e){return e.id===""+s+o}));if(l)h.partOfShip("s1"),l.shipFields.push(h);else{a=1===i[s][o+1]?"R":"D";var u=new n.default(s,o,"s1",a);h.partOfShip("s1"),u.shipFields.push(h),e.push(u)}}else if(2===i[s][o]){a="",l=e.find((function(e){return"s2"===e.name})),h=t.find((function(e){return e.id===""+s+o}));if(l)h.partOfShip("s2"),l.shipFields.push(h);else{a=2===i[s][o+1]?"R":"D";u=new n.default(s,o,"s2",a);h.partOfShip("s2"),u.shipFields.push(h),e.push(u)}}else if(3===i[s][o]){a="",l=e.find((function(e){return"s3"===e.name})),h=t.find((function(e){return e.id===""+s+o}));if(l)h.partOfShip("s3"),l.shipFields.push(h);else{a=3===i[s][o+1]?"R":"D";u=new n.default(s,o,"s3",a);h.partOfShip("s3"),u.shipFields.push(h),e.push(u)}}else if(4===i[s][o]){a="",l=e.find((function(e){return"s4"===e.name})),h=t.find((function(e){return e.id===""+s+o}));if(l)h.partOfShip("s4"),l.shipFields.push(h);else{a=4===i[s][o+1]?"R":"D";u=new n.default(s,o,"s4",a);h.partOfShip("s4"),u.shipFields.push(h),e.push(u)}}else if(5===i[s][o]){a="",l=e.find((function(e){return"s5"===e.name})),h=t.find((function(e){return e.id===""+s+o}));if(l)h.partOfShip("s5"),l.shipFields.push(h);else{a=5===i[s][o+1]?"R":"D";u=new n.default(s,o,"s5",a);h.partOfShip("s5"),u.shipFields.push(h),e.push(u)}}}))},e.prototype.playerShoot=function(e,t,i){if("war"==this.gameStatus&&"player"==this.currentTurn){var r=e.target.id.substring(5,7),n=t.find((function(e){return e.id===r}));if(1==n.isHit)console.log("You shoted this field");else if(n.takeHit(),1==n.isShipPart){var s=i.find((function(e){return e.name===n.partOfWhatShip}));if(console.log("You hit ship"),1==s.isItSunked()){console.log("You destoryed "+s.name),s.isSunked();var o=i.indexOf(s);i.splice(o,1),this.isGameEnd()}}else console.log("You missed"),this.currentTurn="enemy",this.enemyShoot(this.playerShipFleet,this.playerBattleField)}},e.prototype.enemyShoot=function(e,t){if("war"==this.gameStatus)for(var i,r=function(){var r=t[Math.floor(Math.random()*n.playerBattleField.length)];if(1==r.isHit);else if(r.takeHit(),1==r.isShipPart){i=e.find((function(e){return e.name===r.partOfWhatShip})),console.log("Enemy hit your ship");for(var s=function(){var s=["D","R","L","U"][Math.floor(3*Math.random())],o=r.x,a=r.y;switch(s){case"D":9!=r.x&&(o=r.x+1);break;case"R":9!=r.y&&(a=r.y+1);break;case"L":0!=r.y&&(a=r.y-1);break;case"U":0!=r.x&&(o=r.x-1)}var l=t.find((function(e){return e.id===""+o+a}));if(l.takeHit(),l=r,1!=r.isShipPart)return console.log("Enemy missed"),n.currentTurn="player","break";i=e.find((function(e){return e.name===r.partOfWhatShip})),console.log("Enemy hit ship")};1!=i.isItSunked()&&"enemy"==n.currentTurn;){if("break"===s())break}if(1==i.isItSunked()){console.log("Enemy destoryed "+i.name),i.isSunked();var o=e.indexOf(i);e.splice(o,1),n.isGameEnd()}}else console.log("Enemy missed"),n.currentTurn="player"},n=this;"enemy"==this.currentTurn;)r()},e.prototype.isGameEnd=function(){"player"==this.currentTurn?0==this.enemyShipFleet.length&&(console.log("PLAYER WON"),this.gameStatus="end",this.playerScore++,console.log(this.playerScore),this.reloadGame()):"enemy"==this.currentTurn&&0==this.playerShipFleet.length&&(console.log("ENEMY WON"),this.gameStatus="end",this.enemyScore++,this.reloadGame())},e.prototype.reloadGame=function(){this.clearBoard(this.playerBoard),this.clearBoard(this.enemyBoard),this.playerShipFleet=[],this.enemyShipFleet=[],this.playerBattleField=[],this.enemyBattleField=[],this.currentTurn="none",this.gameStatus="preparation",this.playerBoardBin=this.createArrayWithO(),this.createBoard(this.playerBoard,this.playerBattleField,this.player),this.createBoard(this.enemyBoard,this.enemyBattleField,this.enemy),this.score=this.playerScore+":"+this.enemyScore},e.prototype.clearBoard=function(e){e.querySelectorAll("div").forEach((function(e){return e.remove()}))},e.prototype.createBoard=function(e,t,i){for(var n=0;n<10;n++)for(var s=0;s<10;s++){var o=document.createElement("div"),a=new r.default(n,s,o);o.classList.add("singleField");var l=50*n,h=50*s;o.id=""+i+n+s,o.style.top=l+"px",o.style.left=h+"px",e.appendChild(o),t.push(a)}console.log(t)},e.prototype.createArrayWithO=function(){return[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]]},e.prototype.randomSetUpEnemyShips=function(){var e;switch(Math.floor(3*Math.random())+1){case 1:e=[[0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,2,0],[0,0,0,0,0,0,0,0,2,0],[0,3,3,3,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,5,0,0,4,4,4,4,0,0],[0,5,0,0,0,0,0,0,0,0],[0,5,0,0,0,0,0,0,0,0],[0,5,0,0,0,0,0,0,0,0],[0,5,0,0,0,0,0,0,0,0]];break;case 2:e=[[0,0,0,0,2,2,0,0,3,0],[0,0,0,0,0,0,0,0,3,0],[0,0,0,1,0,0,0,0,3,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,4,4,4,4,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,5,5,5,5,5,0,0,0,0]];break;case 3:e=[[0,0,0,0,0,0,0,0,0,0],[0,0,3,3,3,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,0,0,0],[4,4,4,4,0,5,0,0,0,0],[0,0,0,0,0,5,0,0,0,0],[0,0,0,0,0,5,0,0,2,0],[0,0,0,0,0,5,0,0,2,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0]]}return e},e}();t.default=o},function(e,t,i){"use strict";t.__esModule=!0;var r=function(){function e(e,t,i){this.x=e,this.y=t,this.isHit=!1,this.isShipPart=!1,this.id=""+e+t,this.body=i,this.partOfWhatShip="none"}return e.prototype.partOfShip=function(e){this.isShipPart=!0,this.body.classList.add("ship"),this.partOfWhatShip=e},e.prototype.takeHit=function(){this.isHit=!0,1==this.isShipPart?(this.body.classList.remove("ship"),this.body.classList.add("hit")):this.body.classList.add("missed")},e}();t.default=r},function(e,t,i){"use strict";t.__esModule=!0;var r=function(){function e(e,t,i,r){this.startX=e,this.startY=t,this.name=i,this.direction=r,this.shipFields=[],this.isSunk=!1}return e.prototype.isSunked=function(){this.isSunk=!0,this.shipFields.forEach((function(e){e.body.classList.add("destroyed")}))},e.prototype.isItSunked=function(){var e=[];return this.shipFields.forEach((function(t){t.isHit,e.push(t.isHit)})),!!e.every(Boolean)},e}();t.default=r},function(e,t,i){"use strict";t.__esModule=!0,function(e){e.s1="s1",e.s2="s2",e.s3="s3",e.s4="s4",e.s5="s5"}(t.shipTypes||(t.shipTypes={})),function(e){e.D="D",e.R="R"}(t.directionTypes||(t.directionTypes={}))}]);